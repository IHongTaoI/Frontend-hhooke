(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{224:function(t,a,v){"use strict";v.r(a);var _=v(0),e=Object(_.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"pm2实践"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#pm2实践"}},[t._v("#")]),t._v(" 🍧 pm2实践")]),t._v(" "),v("h2",{attrs:{id:"概述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 💥 概述")]),t._v(" "),v("h3",{attrs:{id:"定义"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[t._v("#")]),t._v(" 定义")]),t._v(" "),v("p",[v("code",[t._v("pm2")]),t._v("是常用的node进程管理工具，它可以提供node.js应用管理、性能监控、负载均衡等。因为在工作中遇到服务器重启后，需要一个个去重新启动每个服务，这样不仅繁琐、效率低，而且容易遗忘开启一些服务")]),t._v(" "),v("h3",{attrs:{id:"pm2的主要特效"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#pm2的主要特效"}},[t._v("#")]),t._v(" PM2的主要特效")]),t._v(" "),v("ul",[v("li",[t._v("内建负载均衡（使用 Node cluster 集群模块）")]),t._v(" "),v("li",[t._v("后台运行")]),t._v(" "),v("li",[t._v("0 秒停机重载，我理解大概意思是维护升级的时候不需要停机.")]),t._v(" "),v("li",[t._v("具有 Ubuntu 和 CentOS 的启动脚本")]),t._v(" "),v("li",[t._v("停止不稳定的进程（避免无限循环）")]),t._v(" "),v("li",[t._v("控制台检测")]),t._v(" "),v("li",[t._v("提供 HTTP API\n-远程控制和实时的接口 API ( Nodejs 模块,允许和 PM2 进程管理器交互 )")])]),t._v(" "),v("h2",{attrs:{id:"安装"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 💥 安装")]),t._v(" "),v("p",[v("code",[t._v("npm install -g pm2")])]),t._v(" "),v("p",[t._v("安装成功后，会自动创建以下目录")]),t._v(" "),v("div",{staticClass:"language-key extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("  $HOME/.pm2/logs // 包括所有应用的日志\n  $HOME/.pm2/pids // 包括所有应用的 pids\n  $HOME/.pm2/dump.pm2 // 开机自启动配置\n  $HOME/.pm2/pm2.log // pm2 日志\n  $HOME/.pm2/pm2.pid // pm2 pid\n")])])]),v("blockquote",[v("p",[v("code",[t._v("$HOME")]),t._v("指的是桌面目录")])]),t._v(" "),v("h2",{attrs:{id:"使用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 💥 使用")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("命名别名 "),v("code",[t._v("testStart")]),t._v(" , 启动脚本为 "),v("code",[t._v("npm run start")])]),t._v(" "),v("p",[v("code",[t._v("pm2 start npm --watch --name testStart -- run start")])])]),t._v(" "),v("li",[v("p",[t._v("命令行参数")]),t._v(" "),v("ul",[v("li",[v("p",[v("code",[t._v("--watch")]),t._v("：监听应用目录的变化，一旦发生变化，自动重启。")])]),t._v(" "),v("li",[v("p",[v("code",[t._v("-i or --instance")]),t._v("：启用多少个实例，可用于负载均衡，如果 -i 0 或者 -i max，则根据当前机器核数确定实例数目。")])]),t._v(" "),v("li",[v("p",[v("code",[t._v("--ignore-watch")]),t._v("：排除监听的目录或文件，可以是特定的文件名，也可以是正则。")])]),t._v(" "),v("li",[v("p",[v("code",[t._v("-n or --name")]),t._v("：应用的名称，查看应用信息的时候可以用到。")])]),t._v(" "),v("li",[v("p",[v("code",[t._v("-o or --output path")]),t._v("：标准输出日志文件的路径")])]),t._v(" "),v("li",[v("p",[v("code",[t._v("-e or --error path")]),t._v("：错误输出日志文件的路径。")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);